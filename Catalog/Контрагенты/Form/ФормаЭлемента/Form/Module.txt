
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	//++МининНА 2014-08-12 Наряд № 000121740
	Дерево = Izh_УправлениеСвойствамиОбъектов.ЗаполнитьДеревоРеквизитов(Объект.Ссылка,"ДополнительныеРеквизитыКонтрагентов");
	ЗначениеВДанныеФормы(Дерево,ДеревоСвойств);
	
	//Дерево = УправлениеСвойствамиСервер.ЗаполнитьДеревоРеквизитов(Объект.Ссылка,"Контрагенты","ДополнительныеРеквизитыКонтрагентов");
	//ЗначениеВДанныеФормы(Дерево,ДеревоСвойств);
	//--МининНА 2014-08-12 Наряд № 000121740
	
	табКонтактнаяИнформация = УправлениеКонтактнойИнформациейСервер.ПриСозданииНаСервереКИ(Объект, Элементы.ТаблицаКонтактнойИнформацииВид, Объект.Ссылка);
	ЗначениеВРеквизитФормы(табКонтактнаяИнформация, "ТаблицаКонтактнойИнформации");
	Элементы.ПроцентКачества.Доступность = Объект.КонтрольКачества;
	Элементы.МинимальнаяСуммаВозврата.Доступность = Объект.ВозвратыРазрешены;
	ДополнительныеОтчетыИОбработки.ПриСозданииНаСервере(ЭтаФорма);
КонецПроцедуры

&НаСервере
Процедура ПередЗаписьюНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
	// Перенесем значения из таблицы значений свойств в табличную часть объекта
	УправлениеСвойствамиСервер.ПеренестиЗначенияСвойств(ТекущийОбъект.ДополнительныеРеквизиты, РеквизитФормыВЗначение("ДеревоСвойств"));
	
	// Перенесем значения из таблицы контактной информации в табличную часть объекта
	УправлениеКонтактнойИнформациейСервер.ПередЗаписьюНаСервереКИ(ТаблицаКонтактнойИнформации, ТекущийОбъект);
КонецПроцедуры

&НаКлиенте
Процедура ТаблицаКонтактнойИнформацииПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа)
	
	Отказ = Истина;
	
КонецПроцедуры

&НаКлиенте
Процедура ТаблицаКонтактнойИнформацииПередУдалением(Элемент, Отказ)
	
	УправлениеКонтактнойИнформациейКлиент.КонтактнаяИнформацияПередУдалением(Модифицированность, Отказ, Элемент.ТекущиеДанные);
	
КонецПроцедуры

&НаКлиенте
Процедура ТаблицаКонтактнойИнформацииПредставлениеПриИзменении(Элемент)
	
	УправлениеКонтактнойИнформациейКлиент.ПредставлениеПриИзменении(Модифицированность, Элементы.ТаблицаКонтактнойИнформации.ТекущиеДанные);
	
КонецПроцедуры

&НаКлиенте
Процедура ТаблицаКонтактнойИнформацииПредставлениеОчистка(Элемент, СтандартнаяОбработка)
	
	УправлениеКонтактнойИнформациейКлиент.ПредставлениеОчистка(Модифицированность, Элементы.ТаблицаКонтактнойИнформации.ТекущиеДанные);
	
КонецПроцедуры


&НаКлиенте
Процедура ДеревоСвойствПриНачалеРедактирования(Элемент, НоваяСтрока, Копирование)
	УправлениеСвойствамиКлиент.ДеревоСвойствПриНачалеРедактирования(Элемент,Объект);
КонецПроцедуры

&НаКлиенте
Процедура ДеревоСвойствПриИзменении(Элемент)
	Модифицированность = Истина;
КонецПроцедуры

&НаКлиенте
Процедура ДеревоСвойствПередНачаломИзменения(Элемент, Отказ)
	Если Элемент.ТекущиеДанные.Картинка = 1 Тогда
		Отказ = Истина;
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура КонтрольКачестваПриИзменении(Элемент)
	Элементы.ПроцентКачества.Доступность = Объект.КонтрольКачества;
КонецПроцедуры

&НаКлиенте
Процедура ВозвратыРазрешеныПриИзменении(Элемент)
	Элементы.МинимальнаяСуммаВозврата.Доступность = Объект.ВозвратыРазрешены;
КонецПроцедуры

&НаКлиенте
Процедура ПриЗакрытии()
	Если ЭтаФорма.Параметры.Свойство("ВыполняемаяЗадача") Тогда
		Задача = ЭтаФорма.Параметры.ВыполняемаяЗадача;
		Если ЗначениеЗаполнено(Задача) Тогда
			УправлениеБизнесПроцессамиСервер.ВыполнитьЗадачу(Задача);
		КонецЕсли;
	КонецЕсли;
КонецПроцедуры


