&НаСервере
Процедура ЗаписатьНаСервере()
	//{МининНА 2014-07-29 12:38:12 Наряд № 000121974  
	тзДанные = ДанныеФормыВЗначение(тзАдреса,Тип("ТаблицаЗначений"));
	//ПоместитьВоВременноеХранилище(тзДанные,Параметры.АдресХранилища);
	НаборЗаписей = РегистрыСведений.Izh_АдресаНоменклатуры.СоздатьНаборЗаписей();
	НаборЗаписей.Отбор.Документ.Установить(ДокСсылка);
	НаборЗаписей.Отбор.Номенклатура.Установить(Номенклатура);
	НаборЗаписей.Прочитать();
	НаборЗаписей.Очистить();
	Для Каждого Стр Из тзДанные цикл
		НоваяСтрока = НаборЗаписей.Добавить();
		НоваяСтрока.Документ = ДокСсылка;
		НоваяСтрока.Номенклатура = Номенклатура;
		НоваяСтрока.Адрес = Стр.Адрес;
	КонецЦикла;
	НаборЗаписей.Записать(Истина);
	//МининНА 2014-07-29 12:38:12 Наряд № 000121974} 
КонецПроцедуры

&НаКлиенте
Процедура Записать(Команда)
	ЗаписатьНаСервере();
	ЭтаФорма.Закрыть(Истина);
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	//{МининНА 2014-07-29 12:38:12 Наряд № 000121974  
	//тзДанные = ПолучитьИзВременногоХранилища(Параметры.АдресХранилища);
	//ЗначениеВДанныеФормы(тзДанные,тзАдреса);
	Номенклатура = Параметры.Номенклатура;
	ДокСсылка = Параметры.Док;
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ
	|	Izh_АдресаНоменклатуры.Адрес
	|ИЗ
	|	РегистрСведений.Izh_АдресаНоменклатуры КАК Izh_АдресаНоменклатуры
	|ГДЕ
	|	Izh_АдресаНоменклатуры.Документ = &Документ
	|	И Izh_АдресаНоменклатуры.Номенклатура В(&Номенклатура)";
	Запрос.УстановитьПараметр("Документ",ДокСсылка);
	Запрос.УстановитьПараметр("Номенклатура",Номенклатура);
	Результат = Запрос.Выполнить();
	Если Не Результат.Пустой() Тогда 
		ЗначениеВДанныеФормы(Результат.Выгрузить(),тзАдреса);
	КонецЕсли;	
	//МининНА 2014-07-29 12:38:12 Наряд № 000121974} 
КонецПроцедуры
