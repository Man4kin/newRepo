
&НаКлиенте
Процедура КонтрагентыПриАктивизацииСтроки(Элемент)
	ОбновитьСписок(Элемент.ТекущаяСтрока);	
КонецПроцедуры

&НаСервере
Процедура ОбновитьСписок(Контрагент)
	НаборЗаписей = РегистрыСведений.EDIПровайдерыПоставщиков.СоздатьНаборЗаписей();
	НаборЗаписей.Отбор.Контрагент.Установить(Контрагент);
	НаборЗаписей.Прочитать();
	ЗначениеВДанныеФормы(НаборЗаписей,Список);
	//Элементы.Список.Обновить();
КонецПроцедуры




&НаКлиенте
Процедура СписокПриИзменении(Элемент)
	Если Элемент.ТекущиеДанные <> Неопределено Тогда
		Элемент.ТекущиеДанные.Контрагент = Список.Отбор.Контрагент.Значение;
		Если НЕ Элемент.ТекущиеДанные.EDIПровайдер.Пустая() Тогда
			ЗаписатьНаСервере();
		КонецЕсли;
	КонецЕсли;
КонецПроцедуры

&НаСервере
Процедура ЗаписатьНаСервере()
	Набор = ДанныеФормыВЗначение(Список,Тип("РегистрСведенийНаборЗаписей.EDIПровайдерыПоставщиков"));
	Набор.Записать();	
КонецПроцедуры

&НаКлиенте
Процедура ГруппаСтраницыПриСменеСтраницы(Элемент, ТекущаяСтраница)
	Если ТекущаяСтраница = Элементы.ГруппаСтраницаКонтрагенты Тогда
		ТекущаяСтрока = Элементы.Контрагенты.ТекущаяСтрока;
		//Элементы.Список.ПодчиненныеЭлементы.ТребуетсяПодтверждениеЗаказа.Видимость = Истина; //если включить то не работает обновление списка
	ИначеЕсли ТекущаяСтраница = Элементы.ГруппаСтраницаСтруктурныеЕдиницы Тогда
		ТекущаяСтрока = Элементы.СтруктурныеЕдиницы.ТекущаяСтрока;
		//Элементы.Список.ПодчиненныеЭлементы.ТребуетсяПодтверждениеЗаказа.Видимость = Ложь;
	Иначе	
		ТекущаяСтрока = Элементы.Организации.ТекущаяСтрока;
		//Элементы.Список.ПодчиненныеЭлементы.ТребуетсяПодтверждениеЗаказа.Видимость = Ложь;
	КонецЕсли;	
	ОбновитьСписок(ТекущаяСтрока);
	
КонецПроцедуры

&НаКлиенте
Процедура ОсновнойПриИзменении(Элемент)
	Если Элементы.Список.ТекущиеДанные.Основной Тогда
		Для Каждого Строка Из Список Цикл 
			Если Строка.Основной И Строка.ИсходныйНомерСтроки <> Элементы.Список.ТекущиеДанные.ИсходныйНомерСтроки Тогда
				Строка.Основной = Ложь;
			КонецЕсли;	
		КонецЦикла;
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура ОтключитьОтбор(Команда)
	//Элементы.Список.ПодчиненныеЭлементы.Контрагент.Видимость = Истина;
	ОтключитьОтборНаСервере();
КонецПроцедуры

&НаСервере
Процедура ОтключитьОтборНаСервере()
	НаборЗаписей = РегистрыСведений.EDIПровайдерыПоставщиков.СоздатьНаборЗаписей();
	НаборЗаписей.Отбор.Контрагент.Использование = Ложь;
	НаборЗаписей.Прочитать();
	ЗначениеВДанныеФормы(НаборЗаписей,Список);
КонецПроцедуры
