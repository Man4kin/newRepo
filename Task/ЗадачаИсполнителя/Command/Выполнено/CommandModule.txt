
&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	Если ПараметрКоманды = Неопределено Тогда
		Предупреждение(НСтр("ru = 'Не выбраны задачи.'"));
		Возврат;
	КонецЕсли;
		
	Для Каждого Задача Из ПараметрКоманды Цикл
		РеквизитыЗадачи = ОбщегоНазначенияСервер.ПолучитьЗначенияРеквизитовОбъекта(Задача,Новый Структура("БизнесПроцесс,Дата"));
		Если ЗначениеЗаполнено(РеквизитыЗадачи.БизнесПроцесс) Тогда
			Если КонецДня(РеквизитыЗадачи.Дата)>КонецДня(ТекущаяДата()) тогда
				Если Вопрос("Дата текущей задачи больше текущей даты. Продолжить?",РежимДиалогаВопрос.ДаНет) = КодВозвратаДиалога.Нет тогда
					Возврат;
				Конецесли;
			Конецесли;
			УправлениеБизнесПроцессамиКлиент.ОткрытьФормуВыполненияЗадачи(Задача);
        Иначе
			УправлениеБизнесПроцессамиСервер.ВыполнитьЗадачу(Задача);
			ПоказатьОповещениеПользователя(
				НСтр("ru = 'Задача выполнена'"),
				ПолучитьНавигационнуюСсылку(Задача),
				Строка(Задача));
		КонецЕсли;		
	КонецЦикла;
	Оповестить("ЗадачаВыполнена", ПараметрКоманды);
	
КонецПроцедуры

