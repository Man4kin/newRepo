
Процедура ПриЗаписи(Отказ, Замещение)
	
	Если ОбменДанными.Загрузка ИЛИ НЕ Izh_Проведение.КонтролироватьОстатки(ЭтотОбъект) Тогда
		Возврат;
	КонецЕсли;
	
	Запрос = Новый Запрос();
	Запрос.МенеджерВременныхТаблиц = ДополнительныеСвойства.ДляПроведения.МенеджерВТ;
	Запрос.УстановитьПараметр("Регистратор", Отбор.Регистратор.Значение);
	Запрос.Текст =
		"ВЫБРАТЬ
		|	УчетАлкоголяПоПроизводителям.Номенклатура,
		|	УчетАлкоголяПоПроизводителям.СтруктурнаяЕдиница,
		|	УчетАлкоголяПоПроизводителям.Фирма,
		|	УчетАлкоголяПоПроизводителям.Производитель,
		|	УчетАлкоголяПоПроизводителям.ВидАлкогольнойПродукции,
		|	УчетАлкоголяПоПроизводителям.Партия,
		|	УчетАлкоголяПоПроизводителям.Количество
		|ПОМЕСТИТЬ ДвиженияУчетАлкоголя
		|ИЗ
		|	РегистрНакопления.УчетАлкоголяПоПроизводителям КАК УчетАлкоголяПоПроизводителям
		|ГДЕ
		|	УчетАлкоголяПоПроизводителям.Регистратор = &Регистратор
		|	И УчетАлкоголяПоПроизводителям.Количество > 0
		|	И УчетАлкоголяПоПроизводителям.ВидДвижения = ЗНАЧЕНИЕ(ВидДвиженияНакопления.Расход)";
	Запрос.Выполнить();
	
КонецПроцедуры




