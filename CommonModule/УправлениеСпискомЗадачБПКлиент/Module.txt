Процедура ПоказатьОписаниеЗадачи(Элемент,ПолеHTML) Экспорт
	Если Элемент.ТекущиеДанные <> Неопределено Тогда
		Данные = Элемент.ТекущиеДанные;
		Основание = "";
		Если Данные.свойство("БизнесПроцесс")=Ложь или Данные.БизнесПроцесс = Неопределено Тогда
			стрОписание = ?(данные.свойство("Описание"),Данные.Описание,"");
		Иначе
			бпПроцесс = Данные.БизнесПроцесс;
			Попытка
				Основание = ОбщегоНазначенияСервер.ПолучитьЗначенияРеквизитовОбъекта(бпПроцесс, Новый Структура("Основание")).Основание;
			Исключение
			КонецПопытки;	
			стрОписание = "Бизнес-процесс """+ОбщегоНазначенияСервер.ПолучитьСинонимМетаданных(бпПроцесс)+""", "+
			"задача """+Данные.Наименование+""" от "+Данные.Дата+
			?(ПустаяСтрока(Данные.Описание) , "", Символы.ПС+"описание: "+Данные.Описание);
		КонецЕсли;
		ТекстПоля = "
		|<HTML>
		|<HEAD>
		|<META http-equiv=Content-Type content=""text/html; charset=utf-8"">
		|</HEAD>
		|<BODY>";
		ТекстПоля = ТекстПоля + ?(ЗначениеЗаполнено(стрОписание),СформироватьHTMLБлок("Детальное описание:", стрОписание),"");
		если данные.свойство("Автор") тогда
			Если ЗначениеЗаполнено(Данные.Автор) Тогда
				ТекстПоля = ТекстПоля + СформироватьHTMLБлок("Автор задачи:", Данные.Автор);
			КонецЕсли;	
		конецесли;
		Если ЗначениеЗаполнено(Основание) Тогда
			ТекстПоля = ТекстПоля + СформироватьHTMLБлок("Базовый объект:", Основание);
		КонецЕсли;
		ТекстПоля = ТекстПоля + "</BODY></HTML>";
		ПолеHTML = ТекстПоля;
	Иначе
		ТекстПоля = "
		|<HTML>
		|<HEAD>
		|<META http-equiv=Content-Type content=""text/html; charset=utf-8"">
		|</HEAD>
		|<BODY></BODY></HTML>";
		ПолеHTML = ТекстПоля;
	КонецЕсли;
КонецПроцедуры

Функция СформироватьHTMLБлок(ЗаголовокБлока, Содержимое, ШрифтФейс = "Verdana", ШрифтСайз = "2")
	БлокТекст = "<tr><td><b><font face=" + ШрифтФейс + " size=" + ШрифтСайз + ">" + ЗаголовокБлока + "</font></b></td></tr>";
	БлокТекст = БлокТекст + "
	|<table border=""0"">
	|<tr><td>&nbsp;&nbsp;</td>
	|<td><font face=" + ШрифтФейс + " size=" + ШрифтСайз + ">" + ?(ТипЗнч(Содержимое) = Тип("Строка"), СтрЗаменить(Содержимое, Символы.ПС, "<br>"), "<a id=" + ПолучитьНавигационнуюСсылку(Содержимое) + " href=about:blank>" + Строка(Содержимое) + "</a>") + "</font></td>
	|<td>&nbsp;</td>
	|</table></div>";
	Возврат БлокТекст;
КонецФункции



