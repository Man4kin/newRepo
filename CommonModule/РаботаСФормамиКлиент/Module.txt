

Процедура ОбработатьИзменениеВалютыВДокументах(Объект,струкКурс) экспорт
	
	Объект.Курс = струкКурс.Курс;
	Объект.Кратность = струкКурс.Кратность;	
	
КонецПроцедуры	
	
Процедура ОткрытьФормуВводаВалютыКурса(Объект) экспорт
	
	ф = ПолучитьФорму("ОбщаяФорма.ФормаВалюта");
	ф.ВалютаДокумента = Объект.Валюта;
	ф.Курс            = Объект.Курс;
	ф.Кратность       = Объект.Кратность;
	ф.ДатаДокумента   = Объект.Дата;
	с = ф.ОткрытьМодально();
	Если ТипЗнч(с)=Тип("Структура") Тогда
		Если с.КодВозвратаДиалога = КодВозвратаДиалога.ОК Тогда
			Объект.Валюта = с.ВалютаДокумента;
			Объект.Курс   = с.Курс;
			Объект.Кратность = с.Кратность;
		КонецЕсли;
	КонецЕсли;
	
КонецПроцедуры	


Процедура ПроверкаДатыРедактирования(Объект) экспорт
	//Если ПараметрыСеанса.ЭтоЦентр Тогда
	//	Возврат Истина;
	//КонецЕсли;	
	КоличествоДней = РаботаСФормамиСервер.ПолучитьКоличествоДнейРедактированияДокументов();
	Если КоличествоДней > 0 Тогда
		Если Объект.Дата < ТекущаяДата()-КоличествоДней*3600*24 Тогда
			ОбщегоНазначенияКлиентСервер.СообщитьПользователю(
			НСтр("ru = 'Запрещено изменение! Установлена дата запрета редактирования'"),Объект);
			Объект.Дата = ТекущаяДата();
		КонецЕсли;
	КонецЕсли;
КонецПроцедуры	
